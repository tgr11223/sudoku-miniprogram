<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG转PNG工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .icon-item {
            text-align: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fafafa;
        }
        .icon-item svg {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
        }
        button {
            background: #4A90E2;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #357ABD;
        }
        .download-all {
            background: #28a745;
            padding: 12px 24px;
            font-size: 16px;
            margin-top: 20px;
        }
        .download-all:hover {
            background: #218838;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>数独小程序图标转换工具</h1>
        <p>这个工具可以帮助您将SVG图标转换为PNG格式，用于微信小程序的tabBar。</p>
        
        <div class="icon-grid">
            <div class="icon-item">
                <h3>游戏图标</h3>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="18" height="18" rx="2" stroke="#999999" stroke-width="2" fill="none"/>
                    <line x1="9" y1="9" x2="15" y2="9" stroke="#999999" stroke-width="2"/>
                    <line x1="9" y1="12" x2="15" y2="12" stroke="#999999" stroke-width="2"/>
                    <line x1="9" y1="15" x2="15" y2="15" stroke="#999999" stroke-width="2"/>
                    <line x1="9" y1="6" x2="15" y2="6" stroke="#999999" stroke-width="2"/>
                </svg>
                <br>
                <button onclick="downloadIcon('game', '#999999')">下载普通版</button>
                <button onclick="downloadIcon('game-active', '#4A90E2')">下载激活版</button>
            </div>
            
            <div class="icon-item">
                <h3>统计图标</h3>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="16" width="3" height="8" fill="#999999"/>
                    <rect x="10" y="12" width="3" height="12" fill="#999999"/>
                    <rect x="16" y="8" width="3" height="16" fill="#999999"/>
                    <line x1="2" y1="22" x2="22" y2="22" stroke="#999999" stroke-width="2"/>
                </svg>
                <br>
                <button onclick="downloadIcon('stats', '#999999')">下载普通版</button>
                <button onclick="downloadIcon('stats-active', '#4A90E2')">下载激活版</button>
            </div>
            
            <div class="icon-item">
                <h3>设置图标</h3>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="3" stroke="#999999" stroke-width="2" fill="none"/>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="#999999" stroke-width="2" fill="none"/>
                </svg>
                <br>
                <button onclick="downloadIcon('settings', '#999999')">下载普通版</button>
                <button onclick="downloadIcon('settings-active', '#4A90E2')">下载激活版</button>
            </div>
        </div>
        
        <button class="download-all" onclick="downloadAllIcons()">下载所有图标</button>
        
        <div style="margin-top: 30px; padding: 15px; background: #e7f3ff; border-radius: 5px;">
            <h3>使用说明：</h3>
            <ol>
                <li>点击上面的按钮下载对应的PNG图标</li>
                <li>将下载的PNG文件重命名为对应的文件名（如：game.png, game-active.png等）</li>
                <li>将PNG文件放到项目的 images 目录中</li>
                <li>删除原来的SVG文件（可选）</li>
                <li>重新编译小程序，tabBar图标错误应该就解决了</li>
            </ol>
        </div>
    </div>

    <script>
        function downloadIcon(name, color) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 48;
            canvas.height = 48;
            
            // 创建SVG字符串
            let svgString = '';
            if (name === 'game' || name === 'game-active') {
                svgString = `<svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="3" width="18" height="18" rx="2" stroke="${color}" stroke-width="2" fill="none"/>
                    <line x1="9" y1="9" x2="15" y2="9" stroke="${color}" stroke-width="2"/>
                    <line x1="9" y1="12" x2="15" y2="12" stroke="${color}" stroke-width="2"/>
                    <line x1="9" y1="15" x2="15" y2="15" stroke="${color}" stroke-width="2"/>
                    <line x1="9" y1="6" x2="15" y2="6" stroke="${color}" stroke-width="2"/>
                </svg>`;
            } else if (name === 'stats' || name === 'stats-active') {
                svgString = `<svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="4" y="16" width="3" height="8" fill="${color}"/>
                    <rect x="10" y="12" width="3" height="12" fill="${color}"/>
                    <rect x="16" y="8" width="3" height="16" fill="${color}"/>
                    <line x1="2" y1="22" x2="22" y2="22" stroke="${color}" stroke-width="2"/>
                </svg>`;
            } else if (name === 'settings' || name === 'settings-active') {
                svgString = `<svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="3" stroke="${color}" stroke-width="2" fill="none"/>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="${color}" stroke-width="2" fill="none"/>
                </svg>`;
            }
            
            // 创建图片并绘制到canvas
            const img = new Image();
            img.onload = function() {
                ctx.drawImage(img, 0, 0, 48, 48);
                
                // 下载PNG文件
                const link = document.createElement('a');
                link.download = name + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            };
            
            const blob = new Blob([svgString], {type: 'image/svg+xml'});
            img.src = URL.createObjectURL(blob);
        }
        
        function downloadAllIcons() {
            const icons = [
                {name: 'game', color: '#999999'},
                {name: 'game-active', color: '#4A90E2'},
                {name: 'stats', color: '#999999'},
                {name: 'stats-active', color: '#4A90E2'},
                {name: 'settings', color: '#999999'},
                {name: 'settings-active', color: '#4A90E2'}
            ];
            
            icons.forEach((icon, index) => {
                setTimeout(() => {
                    downloadIcon(icon.name, icon.color);
                }, index * 200);
            });
        }
    </script>
</body>
</html>
